<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AETHER VORTEX ASURA v4.0</title>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00d2ff;
            --neon-pink: #ff0077;
            --gold: #FFD700;
            --main-font: 'El Messiri', sans-serif;
            --pending-yellow: #ffae00;
            --skip-gray: #555;
        }

        body {
            background: #050112;
            color: white;
            font-family: var(--main-font);
            margin: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            width: 100%;
            max-width: 380px;
            padding: 15px;
            background: radial-gradient(circle at center, #1a0b3d 0%, #050112 100%);
            display: flex;
            flex-direction: column;
        }

        .title-svg { width: 100%; height: 50px; margin-bottom: 10px; }
        .title-svg text {
            font-family: var(--main-font);
            font-size: 30px; font-weight: 700; fill: none; stroke: #fff;
            stroke-width: 1; stroke-dasharray: 300;
            animation: strokeAnim 3s infinite alternate; text-transform: uppercase;
        }
        @keyframes strokeAnim {
            0% { stroke-dashoffset: 300; fill: rgba(255,255,255,0); }
            100% { stroke-dashoffset: 0; fill: rgba(255,255,255,1); filter: drop-shadow(0 0 10px var(--neon-blue)); }
        }

        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #331a66;
            padding: 10px;
            border-radius: 12px;
            text-align: center;
        }
        .label { font-size: 10px; color: #888; text-transform: uppercase; margin-bottom: 3px; }
        .val { font-size: 16px; font-weight: 700; color: #fff; display: flex; align-items: center; justify-content: center; }

        .modern-icon { width: 18px; height: 18px; margin-right: 5px; filter: drop-shadow(0 0 5px currentColor); }

        #notify-box {
            height: 35px; background: rgba(0,0,0,0.3); border: 1px solid rgba(0, 210, 255, 0.3);
            border-radius: 10px; margin-bottom: 10px; display: flex; align-items: center;
            justify-content: center; font-size: 11px; color: var(--gold); font-weight: 700;
        }

        .cards-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .card { flex: 1; background: rgba(0,0,0,0.5); border-radius: 15px; padding: 10px; text-align: center; border: 2px solid #221545; transition: 0.3s; }
        .card img { width: 100%; max-height: 110px; opacity: 0.1; }
        .active-big { border-color: var(--neon-blue); box-shadow: 0 0 15px var(--neon-blue); }
        .active-big img { opacity: 1; }
        .active-small { border-color: var(--neon-pink); box-shadow: 0 0 15px var(--neon-pink); }
        .active-small img { opacity: 1; }

        .asura-tag { font-size: 9px; color: var(--neon-blue); letter-spacing: 1px; margin-top: 5px; }

        .history-box { flex: 1; background: rgba(255,255,255,0.02); border-radius: 12px; padding: 10px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th { color: #555; text-align: left; padding-bottom: 5px; border-bottom: 1px solid #222; }
        td { padding: 8px 0; border-bottom: 1px solid #111; }

        #setup-modal { position: fixed; inset: 0; background: #050112; z-index: 1000; display: flex; align-items: center; justify-content: center; }
        .setup-content { background: #12092c; padding: 25px; border-radius: 15px; border: 1px solid var(--neon-blue); text-align: center; }
        
        #central-notify {
            position: fixed; top: 45%; left: 50%; transform: translate(-50%, -50%);
            z-index: 2000; padding: 30px 45px; border-radius: 20px; display: none; text-align: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
        }
        .win-modal { background: linear-gradient(45deg, #00ff96, #00d2ff); color: #000; border: 3px solid #00ff96; }
        .loss-modal { background: linear-gradient(45deg, #ff0050, #ff5e3a); color: #fff; border: 3px solid #ff0050; }
    </style>
</head>
<body>

<div id="setup-modal">
    <div class="setup-content">
        <h2 style="color:var(--neon-blue); font-weight:700;">ASURA ENGINE v4.0</h2>
        <input type="number" id="bal-input" value="1000" style="padding:10px; border-radius:5px; border:none; width:150px; text-align:center;"><br><br>
        <button onclick="startApp()" style="padding:10px 20px; background:var(--neon-blue); border:none; color:white; border-radius:5px; cursor:pointer; font-weight:700;">ACTIVATE ASURA</button>
    </div>
</div>

<div id="central-notify"></div>

<div class="container">
    <svg class="title-svg" viewBox="0 0 400 50">
        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">AETHER VORTEX</text>
    </svg>

    <div class="info-grid">
        <div class="box">
            <div class="label">WALLET</div>
            <div class="val">
                <svg class="modern-icon" style="color:var(--gold)" viewBox="0 0 24 24"><path fill="currentColor" d="M21 18v1c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h9zM12 8h10v8H12z"/></svg>
                ₹<span id="wallet-val">0.00</span>
            </div>
        </div>
        <div class="box">
            <div class="label">TIMER</div>
            <div class="val" id="timer-val" style="color:var(--neon-blue)">
                <svg class="modern-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.5 13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                <span>00:00</span>
            </div>
        </div>
        <div class="box" style="border-color:var(--neon-blue)">
            <div class="label">ASURA TARGET</div>
            <div class="val" id="target-val" style="color:var(--neon-blue)">---</div>
            <div class="asura-tag" id="accuracy-val">ACCURACY: 0%</div>
        </div>
        <div class="box" style="border-color:var(--neon-pink)">
            <div class="label">ASURA BET</div>
            <div class="val" id="bet-val" style="color:var(--neon-pink)">₹10.00</div>
            <div class="asura-tag" id="asura-mode">MODE: HUNTING</div>
        </div>
    </div>

    <div id="notify-box">SYSTEM: RAJ X MODS + ASURA v4.0</div>

    <div class="cards-row">
        <div id="big-card" class="card">
            <img src="https://firebasestorage.googleapis.com/v0/b/i-to-u.appspot.com/o/publicimage%2F1000473969.png?alt=media&token=62de8c4b-63ef-44c0-a426-3fdb465assd6b">
            <div style="color:var(--neon-blue); font-size:14px; margin-top:5px;">BIG</div>
        </div>
        <div id="small-card" class="card">
            <img src="https://firebasestorage.googleapis.com/v0/b/i-to-u.appspot.com/o/publicimage%2F1000473970.png?alt=media&token=2451172b-6162-4f05-9b8d-83a5812826a5">
            <div style="color:var(--neon-pink); font-size:14px; margin-top:5px;">SMALL</div>
        </div>
    </div>

    <div class="history-box">
        <table>
            <thead><tr><th>PERIOD (5D)</th><th>SIDE</th><th>BET</th><th>STATUS</th></tr></thead>
            <tbody id="logs"></tbody>
        </table>
    </div>
</div>

<script>
    let wallet = 0, currentBet = 10, prediction = null;
    let lastProcessedPeriod = "", isFetching = false, nextPeriodNumber = "";
    let historyData = [];

    function runAsuraLogic(history) {
        if (history.length < 5) return { prediction: "SKIP", confidence: 0 };
        const asura_multiplier = [5, 4, 3, 2, 1];
        const data = history.slice(-5).map(x => x === 'B' ? 1 : 0);
        let weightedSum = 0;
        for(let i=0; i<5; i++) { weightedSum += data[i] * asura_multiplier[i]; }
        const asura_score = weightedSum / 15;

        if (asura_score > 0.8) return { prediction: "BIG", confidence: 98.2 };
        if (asura_score < 0.2) return { prediction: "SMALL", confidence: 97.9 };
        if (asura_score >= 0.45 && asura_score <= 0.55) {
            const last = history[history.length - 1];
            return { prediction: last === 'B' ? 'SMALL' : 'BIG', confidence: 91.5 };
        }
        return { prediction: "SKIP", confidence: 0 };
    }

    function startApp() {
        wallet = parseFloat(document.getElementById('bal-input').value) || 1000;
        document.getElementById('wallet-val').innerText = wallet.toFixed(2);
        document.getElementById('setup-modal').style.display = 'none';
        setInterval(tick, 1000); 
        syncAPI();
    }

    async function syncAPI() {
        try {
            const res = await fetch(`https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=${Date.now()}`);
            const data = await res.json();
            const list = data.data.list;
            historyData = list.slice(0, 10).reverse().map(item => parseInt(item.number) >= 5 ? 'B' : 'S');
            lastProcessedPeriod = list[0].issueNumber;
            nextPeriodNumber = (BigInt(lastProcessedPeriod) + 1n).toString();
            generateAsuraPrediction();
        } catch (e) { setTimeout(syncAPI, 1500); }
    }

    function generateAsuraPrediction() {
        if (prediction) return;
        const asura = runAsuraLogic(historyData);
        
        // Reset Card Highlights
        document.getElementById('big-card').className = 'card';
        document.getElementById('small-card').className = 'card';

        prediction = { period: nextPeriodNumber, side: asura.prediction, amt: currentBet };
        
        document.getElementById('target-val').innerText = asura.prediction;
        document.getElementById('accuracy-val').innerText = asura.prediction === "SKIP" ? "FILTER ACTIVE" : `CONFIDENCE: ${asura.confidence}%`;
        
        if (asura.prediction === "SKIP") {
            document.getElementById('notify-box').innerText = "ASURA: UNSTABLE TREND - SKIPPING PERIOD";
            addLog(nextPeriodNumber, "SKIP", 0, "FILTERED", "var(--skip-gray)");
        } else {
            document.getElementById('notify-box').innerText = `ASURA v4.0: TARGET ${nextPeriodNumber.slice(-5)}`;
            document.getElementById(asura.prediction === 'BIG' ? 'big-card' : 'small-card').classList.add(asura.prediction === 'BIG' ? 'active-big' : 'active-small');
            addLog(nextPeriodNumber, asura.prediction, currentBet, "PENDING", "var(--pending-yellow)");
        }
    }

    function addLog(period, side, bet, status, color) {
        const row = `<tr id="row-${period}"><td>${period.slice(-5)}</td><td>${side}</td><td>${bet.toFixed(2)}</td><td id="stat-${period}" style="color:${color}; font-weight:700;">${status}</td></tr>`;
        document.getElementById('logs').insertAdjacentHTML('afterbegin', row);
    }

    function tick() {
        const remaining = 60 - (new Date().getSeconds());
        document.getElementById('timer-val').querySelector('span').innerText = `00:${remaining < 10 ? '0'+remaining : remaining}`;
        if ((remaining <= 3 || remaining >= 59) && !isFetching) fetchResult();
    }

    async function fetchResult() {
        if (!prediction) return;
        isFetching = true;
        try {
            const res = await fetch(`https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=${Date.now()}`);
            const data = await res.json();
            const latest = data.data.list[0];
            
            if (latest.issueNumber === prediction.period) {
                const real = parseInt(latest.number) >= 5 ? "BIG" : "SMALL";
                const pID = prediction.period;

                if (prediction.side !== "SKIP") {
                    const win = prediction.side === real;
                    if (win) {
                        wallet += (prediction.amt * 1.9) * 0.99;
                        currentBet = 10;
                        updateStatus(pID, "WIN", "#0f9");
                        showPopup("ASURA WIN!", (prediction.amt * 1.9), true);
                    } else {
                        wallet -= prediction.amt;
                        currentBet = prediction.amt * 2;
                        updateStatus(pID, "LOSS", "#f05");
                        showPopup("ASURA LOSS", prediction.amt, false);
                    }
                } else {
                    updateStatus(pID, "PASSED", "#888");
                }

                document.getElementById('wallet-val').innerText = wallet.toFixed(2);
                document.getElementById('bet-val').innerText = "₹" + currentBet.toFixed(2);
                historyData.push(real);
                if (historyData.length > 10) historyData.shift();
                nextPeriodNumber = (BigInt(pID) + 1n).toString(); 
                prediction = null; 
                isFetching = false;
                generateAsuraPrediction();
            } else { isFetching = false; setTimeout(fetchResult, 1000); }
        } catch (e) { isFetching = false; setTimeout(fetchResult, 1000); }
    }

    function updateStatus(id, txt, col) {
        const el = document.getElementById(`stat-${id}`);
        if(el) { el.innerText = txt; el.style.color = col; }
    }

    function showPopup(title, amt, win) {
        const p = document.getElementById('central-notify');
        p.className = win ? 'win-modal' : 'loss-modal';
        p.innerHTML = `<b style="font-size:18px">${title}</b><br><span style="font-size:40px; font-weight:700;">${win?'+':'-'}₹${amt.toFixed(2)}</span>`;
        p.style.display = 'block';
        setTimeout(() => p.style.display = 'none', 2500);
    }
</script>
</body>
</html>
